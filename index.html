<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Insight Card</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#0f1724;
      --muted:#96a0b8;
      --accent:#10a37f;
      --glass: rgba(255,255,255,0.03);
      --msg-user: linear-gradient(180deg,#0f1724,#0b1220);
      --msg-assistant: linear-gradient(180deg,#111827,#0b1220);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#06102a 0%, #071021 100%);color:#e6eef6}
    .app{display:flex;height:100vh;gap:18px;padding:22px}

    /* Sidebar */
    .sidebar{width:260px;background:linear-gradient(180deg,#071022 0%, #081528 100%);border-radius:12px;padding:16px;display:flex;flex-direction:column;gap:12px}
    .sidebar .brand{display:flex;align-items:center;gap:10px}
    .logo{width:38px;height:38px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700}
    .new-btn{background:var(--glass);padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    .conversations{flex:1;overflow:auto;padding-right:6px}
    .conv{padding:10px;border-radius:8px;display:flex;gap:10px;align-items:center;cursor:pointer}
    .conv:hover{background:rgba(255,255,255,0.02)}
    .conv .icon{width:34px;height:34px;border-radius:6px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center}

    /* Main panel */
    .panel{flex:1;display:flex;flex-direction:column;border-radius:12px;background:linear-gradient(180deg,#071021 0%, #071424 100%);overflow:hidden}
    .panel .header{display:flex;align-items:center;justify-content:space-between;padding:18px;border-bottom:1px solid rgba(255,255,255,0.03)}
    .panel .header .title{font-size:16px;font-weight:600}
    .messages{flex:1;overflow:auto;padding:22px;display:flex;flex-direction:column;gap:14px}

    .msg{max-width:78%;padding:12px 14px;border-radius:12px;line-height:1.4}
    .msg.user{align-self:flex-end;background:var(--msg-user);border:1px solid rgba(255,255,255,0.02)}
    .msg.assistant{align-self:flex-start;background:var(--msg-assistant);border:1px solid rgba(255,255,255,0.03)}
    .meta{font-size:12px;color:var(--muted);margin-top:6px}

    .input-area{display:flex;gap:12px;padding:14px;border-top:1px solid rgba(255,255,255,0.02);align-items:center}
    .input{flex:1;background:transparent;border:1px solid rgba(255,255,255,0.03);padding:12px;border-radius:10px;min-height:44px;color:inherit}
    .send{background:var(--accent);border:none;padding:10px 14px;border-radius:8px;color:#04121a;font-weight:600;cursor:pointer}

    .typing{width:56px;height:18px;display:flex;gap:6px;align-items:center}
    .dot{width:8px;height:8px;border-radius:50%;background:#9fbfb5;opacity:0.2;animation:blink 1.2s infinite}
    .dot:nth-child(2){animation-delay:0.15s}
    .dot:nth-child(3){animation-delay:0.3s}
    @keyframes blink{0%{opacity:0.2}40%{opacity:1}100%{opacity:0.2}}

    /* Laptop card */
    .cards{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:8px}
    .card{background:var(--panel);border:1px solid rgba(255,255,255,0.05);border-radius:12px;padding:10px;text-align:center}
    .card img{width:100%;border-radius:8px;margin-bottom:6px}
    .card-name{font-weight:600;margin-bottom:4px}
    .card-price{color:var(--muted)}

    /* Responsive */
    @media(max-width:900px){
      .sidebar{display:none}
      .app{padding:12px}
      .cards{grid-template-columns:1fr}
    }

    .footer-note{font-size:13px;color:var(--muted);padding:8px}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">
        <div class="logo"><a data-v-043f7bc2="" class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent hover:from-purple-700 hover:to-pink-700 transition-all duration-300 touch-manipulation" href="/"> InsightCart </a></div>

      </div>
      <button class="new-btn" id="newConv">+ New chat</button>
      <div class="conversations" id="conversations"></div>
      <div class="footer-note">Built with HTML/CSS/JS — frontend only</div>
    </aside>

    <main class="panel">
      <div class="header">
        <div class="title">Welcome — Chat</div>
        <div style="display:flex;gap:12px;align-items:center">
          <div style="font-size:13px;color:var(--muted)">Model: gpt-sim</div>
          <div style="width:36px;height:36px;border-radius:8px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center">U</div>
        </div>
      </div>

      <div class="messages" id="messages" aria-live="polite">
        <div class="msg assistant" data-id="m1">
          <div>Hello! Ask me for a laptop recommendation.</div>
          <div class="meta">Assistant • just now</div>
        </div>
      </div>

      <div class="input-area">
        <div contenteditable="true" class="input" id="input" role="textbox" aria-label="Message input"></div>
        <button class="send" id="send">Send</button>
      </div>
      <div id="thread-bottom"><div class="text-base mx-auto [--thread-content-margin:--spacing(4)] thread-sm:[--thread-content-margin:--spacing(6)] thread-lg:[--thread-content-margin:--spacing(16)] px-(--thread-content-margin)"><div class="[--thread-content-max-width:40rem] thread-lg:[--thread-content-max-width:48rem] mx-auto max-w-(--thread-content-max-width) flex-1"><div class="flex justify-center empty:hidden"></div><div class="pointer-events-auto relative z-1 flex h-[var(--composer-container-height,100%)] max-w-full flex-[var(--composer-container-flex,1)] flex-col"><button type="button" class="invisible absolute self-center" aria-hidden="true" tabindex="-1" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-_R_jl4lh6aj5cea4qcm_" data-state="closed" name="context-connector-pasted-link-popover-trigger"></button><form class="group/composer w-full" style="view-transition-name:var(--vt-composer)" data-type="unified-composer"><div class="hidden"><input multiple="" type="file" style="border:0;clip:rect(0, 0, 0, 0);clip-path:inset(50%);height:1px;margin:0 -1px -1px 0;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap" tabindex="-1"></div><div class=""><div class="bg-token-bg-primary cursor-text overflow-clip bg-clip-padding p-2.5 contain-inline-size dark:bg-[#303030] grid grid-cols-[auto_1fr_auto] [grid-template-areas:'header_header_header'_'leading_primary_trailing'_'._footer_.'] group-data-expanded/composer:[grid-template-areas:'header_header_header'_'primary_primary_primary'_'leading_footer_trailing'] shadow-short" style="border-radius: 28px;"><div class="-my-2.5 flex min-h-14 items-center overflow-x-hidden px-1.5 [grid-area:primary] group-data-expanded/composer:mb-0 group-data-expanded/composer:px-2.5"><div class="_prosemirror-parent_1dsxi_2 text-token-text-primary max-h-[max(35svh,5rem)] max-h-52 flex-1 overflow-auto [scrollbar-width:thin] default-browser vertical-scroll-fade-mask"><textarea class="_fallbackTextarea_1dsxi_2" name="prompt-textarea" autofocus="" placeholder="Ask anything" data-virtualkeyboard="true" style="display: none;"></textarea><script nonce="">window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))</script><div contenteditable="true" translate="no" class="ProseMirror" id="prompt-textarea" data-virtualkeyboard="true"><p data-placeholder="Ask anything" class="placeholder"><br class="ProseMirror-trailingBreak"></p></div></div></div><div class="[grid-area:leading]"><span class="flex" data-state="closed"><button type="button" class="composer-btn" data-testid="composer-plus-btn" aria-label="Add files and more" id="composer-plus-btn" aria-haspopup="menu" aria-expanded="false" data-state="closed"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M9.33496 16.5V10.665H3.5C3.13273 10.665 2.83496 10.3673 2.83496 10C2.83496 9.63273 3.13273 9.33496 3.5 9.33496H9.33496V3.5C9.33496 3.13273 9.63273 2.83496 10 2.83496C10.3673 2.83496 10.665 3.13273 10.665 3.5V9.33496H16.5L16.6338 9.34863C16.9369 9.41057 17.165 9.67857 17.165 10C17.165 10.3214 16.9369 10.5894 16.6338 10.6514L16.5 10.665H10.665V16.5C10.665 16.8673 10.3673 17.165 10 17.165C9.63273 17.165 9.33496 16.8673 9.33496 16.5Z"></path></svg></button></span></div><div class="flex items-center gap-2 [grid-area:trailing]"><div class="ms-auto flex items-center gap-1.5"><span class="" data-state="closed"><button aria-label="Dictate button" type="button" class="composer-btn"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-label="" class="icon" font-size="inherit"><path d="M15.7806 10.1963C16.1326 10.3011 16.3336 10.6714 16.2288 11.0234L16.1487 11.2725C15.3429 13.6262 13.2236 15.3697 10.6644 15.6299L10.6653 16.835H12.0833L12.2171 16.8486C12.5202 16.9106 12.7484 17.1786 12.7484 17.5C12.7484 17.8214 12.5202 18.0894 12.2171 18.1514L12.0833 18.165H7.91632C7.5492 18.1649 7.25128 17.8672 7.25128 17.5C7.25128 17.1328 7.5492 16.8351 7.91632 16.835H9.33527L9.33429 15.6299C6.775 15.3697 4.6558 13.6262 3.84992 11.2725L3.76984 11.0234L3.74445 10.8906C3.71751 10.5825 3.91011 10.2879 4.21808 10.1963C4.52615 10.1047 4.84769 10.2466 4.99347 10.5195L5.04523 10.6436L5.10871 10.8418C5.8047 12.8745 7.73211 14.335 9.99933 14.335C12.3396 14.3349 14.3179 12.7789 14.9534 10.6436L15.0052 10.5195C15.151 10.2466 15.4725 10.1046 15.7806 10.1963ZM12.2513 5.41699C12.2513 4.17354 11.2437 3.16521 10.0003 3.16504C8.75675 3.16504 7.74835 4.17343 7.74835 5.41699V9.16699C7.74853 10.4104 8.75685 11.418 10.0003 11.418C11.2436 11.4178 12.2511 10.4103 12.2513 9.16699V5.41699ZM13.5814 9.16699C13.5812 11.1448 11.9781 12.7479 10.0003 12.748C8.02232 12.748 6.41845 11.1449 6.41828 9.16699V5.41699C6.41828 3.43889 8.02221 1.83496 10.0003 1.83496C11.9783 1.83514 13.5814 3.439 13.5814 5.41699V9.16699Z"></path></svg></button></span><div class="min-w-9" data-testid="composer-speech-button-container"><span class="" data-state="closed"><button data-testid="composer-speech-button" aria-label="Start voice mode" class="relative flex h-9 items-center justify-center rounded-full disabled:text-gray-50 disabled:opacity-30 w-9 composer-secondary-button-color hover:opacity-80" style="view-transition-name: var(--vt-composer-speech-button);"><div class="flex items-center justify-center"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M7.167 15.416V4.583a.75.75 0 0 1 1.5 0v10.833a.75.75 0 0 1-1.5 0Zm4.166-2.5V7.083a.75.75 0 0 1 1.5 0v5.833a.75.75 0 0 1-1.5 0ZM3 11.25V8.75a.75.75 0 0 1 1.5 0v2.5a.75.75 0 0 1-1.5 0Zm12.5 0V8.75a.75.75 0 0 1 1.5 0v2.5a.75.75 0 0 1-1.5 0Z"></path></svg></div></button></span></div></div></div></div></div></form></div><input class="sr-only" type="file" tabindex="-1" aria-hidden="true" id="upload-photos" accept="image/*" multiple=""><input class="sr-only" type="file" tabindex="-1" aria-hidden="true" id="upload-camera" accept="image/*" capture="environment" multiple=""></div></div></div>
    </main>
  </div>

  <script>
    const messagesEl = document.getElementById('messages');
    const inputEl = document.getElementById('input');
    const sendBtn = document.getElementById('send');

    const laptops = {
      Apple: [
        { name:"MacBook Air M2", price:999, image:"https://m.media-amazon.com/images/I/71jG+e7roXL._AC_SL1500_.jpg" },
        { name:"MacBook Pro 14”", price:1799, image:"https://m.media-amazon.com/images/I/61vFO3R5UNL._AC_SL1500_.jpg" }
      ],
      Dell: [
        { name:"Dell XPS 13", price:1099, image:"https://m.media-amazon.com/images/I/71P5TCLJtsL._AC_SL1500_.jpg" },
        { name:"Dell Inspiron 15", price:799, image:"https://m.media-amazon.com/images/I/71O4jzRtbxL._AC_SL1500_.jpg" }
      ],
      HP: [
        { name:"HP Spectre x360", price:1249, image:"https://m.media-amazon.com/images/I/71mA1qczwUL._AC_SL1500_.jpg" },
        { name:"HP Pavilion 14", price:699, image:"https://m.media-amazon.com/images/I/91wFvPZ+H7L._AC_SL1500_.jpg" }
      ]
    };

    let step = "idle";
    let selectedBrand = null;

    function escapeHtml(unsafe){
      return unsafe.replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#039;"})[m]);
    }

    function pushUser(text){
      const el = document.createElement('div');
      el.className = 'msg user';
      el.innerHTML = '<div>'+escapeHtml(text)+'</div><div class="meta">You • just now</div>';
      messagesEl.appendChild(el);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function pushAssistant(text){
      const el = document.createElement('div');
      el.className = 'msg assistant';
      el.innerHTML = '<div>'+escapeHtml(text)+'</div><div class="meta">Assistant • just now</div>';
      messagesEl.appendChild(el);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function pushLaptopOptions(options){
      const el = document.createElement('div');
      el.className = 'msg assistant';
      let html = '<div>Choose a brand:</div><div class="cards">';
      options.forEach(b=>{
        html+='<button style="padding:6px 10px;border-radius:8px;margin:4px;background:#10a37f;color:black;font-weight:600;cursor:pointer" onclick="selectBrand(\''+b+'\')">'+b+'</button>';
      });
      html+='</div><div class="meta">Assistant • just now</div>';
      el.innerHTML = html;
      messagesEl.appendChild(el);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function selectBrand(brand){
      selectedBrand = brand;
      pushUser(brand);
      pushAssistant("Great! What’s your budget?");
      step = "budget";
      // show budget options
      const el = document.createElement('div');
      el.className = 'msg assistant';
      const ranges = ["Under $800","$800–$1200","Above $1200"];
      let html = '<div>Select budget:</div><div class="cards">';
      ranges.forEach(r=>{
        html+='<button style="padding:6px 10px;border-radius:8px;margin:4px;background:#10a37f;color:black;font-weight:600;cursor:pointer" onclick="selectBudget(\''+r+'\')">'+r+'</button>';
      });
      html+='</div><div class="meta">Assistant • just now</div>';
      el.innerHTML = html;
      messagesEl.appendChild(el);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function selectBudget(range){
      pushUser(range);
      const filtered = laptops[selectedBrand].filter(l=>{
        if(range==="Under $800") return l.price<800;
        if(range==="$800–$1200") return l.price>=800 && l.price<=1200;
        if(range==="Above $1200") return l.price>1200;
        return true;
      });
      const el = document.createElement('div');
      el.className = 'msg assistant';
      let html = '<div>Here are matching laptops:</div><div class="cards">';
      filtered.forEach(l=>{
        html+='<div class="card"><img src="'+l.image+'" alt="'+l.name+'"><div class="card-name">'+l.name+'</div><div class="card-price">$'+l.price+'</div></div>';
      });
      html+='</div><div class="meta">Assistant • just now</div>';
      el.innerHTML = html;
      messagesEl.appendChild(el);
      messagesEl.scrollTop = messagesEl.scrollHeight;
      step="results";
    }

    sendBtn.addEventListener('click',()=>{
      const text = inputEl.innerText.trim();
      if(!text) return;
      pushUser(text);
      inputEl.innerText='';
      if(text.toLowerCase().includes("laptop") && step==="idle"){
        pushLaptopOptions(Object.keys(laptops));
        step="brand";
      } else {
        pushAssistant("Try asking for a laptop recommendation!");
      }
    });

    inputEl.addEventListener('keydown',(e)=>{
      if(e.key==='Enter' && !e.shiftKey){
        e.preventDefault();
        sendBtn.click();
      }
    });
    inputEl.focus();
  </script>
</body>
</html>
